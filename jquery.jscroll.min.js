!function(r){"use strict";r.jscroll={defaults:{debug:!1,autoTrigger:!0,autoTriggerUntil:!1,loadingHtml:"<small>Loading...</small>",padding:0,nextSelector:"a:last",prevSelector:"a:first",contentSelector:"",pagingSelector:"",callback:!1}};var e=function(e,t){var n=e.data("jscroll"),l="function"==typeof t?{callback:t}:t,i=r.extend({},r.jscroll.defaults,l,n||{}),o="visible"===e.css("overflow-y"),c=e.find(i.nextSelector).first(),a=e.find(i.prevSelector).first(),s=r(window),d=r("body"),f=o?s:e,p=r.trim(c.attr("href")+" "+i.contentSelector),u=r.trim(a.attr("href")+" "+i.contentSelector),g=r.extend({},i),j=function(){var e=r(i.loadingHtml).filter("img").attr("src");if(e){var t=new Image;t.src=e}},v=function(){e.find(".jscroll-inner").length||e.contents().wrapAll('<div class="jscroll-inner" />')},h=function(r){var e;i.pagingSelector?r.closest(i.pagingSelector).hide():(e=r.parent().not(".jscroll-inner,.jscroll-prepended").addClass("jscroll-prev-parent").hide(),e.length||r.wrap('<div class="jscroll-prev-parent" />').parent().hide())},m=function(r){var e;i.pagingSelector?r.closest(i.pagingSelector).hide():(e=r.parent().not(".jscroll-inner,.jscroll-added").addClass("jscroll-next-parent").hide(),e.length||r.wrap('<div class="jscroll-next-parent" />').parent().hide())},b=function(){return f.unbind(".jscroll").removeData("jscroll").find(".jscroll-inner").children().unwrap().filter(".jscroll-added").children().unwrap()},S=function(){v();var r=e.find("div.jscroll-inner").first(),t=e.data("jscroll"),n=parseInt(e.css("borderTopWidth"),10),l=isNaN(n)?0:n,c=parseInt(e.css("paddingTop"),10)+l,a=o?f.scrollTop():e.offset().top,s=r.length?r.offset().top:0,d=Math.ceil(a-s+f.height()+c);return!t.waiting&&d+i.padding>=r.outerHeight()?(I("info","jScroll:",r.outerHeight()-d,"from bottom. Loading next request..."),U()):void I("info","W3line-jScroll:",r.outerHeight()-d,"from bottom. Loading prev request...")},x=function(r){return r=r||e.data("jscroll"),H(),r&&r.prevHref?!0:!1},w=function(r){return r=r||e.data("jscroll"),y(),r&&r.nextHref?(y(),!0):(I("warn","jScroll: nextSelector not found - destroying"),b(),!1)},H=function(){var r=e.find(i.prevSelector).first();r.length&&r.unbind("click.jscroll").bind("click.jscroll",function(){return h(r),k(),!1})},y=function(){var r=e.find(i.nextSelector).first();r.length&&(i.autoTrigger&&(i.autoTriggerUntil===!1||i.autoTriggerUntil>0)?(m(r),d.height()<=s.height()&&S(),f.unbind(".jscroll").bind("scroll.jscroll",function(){return S()})):(f.unbind(".jscroll"),r.unbind("click.jscroll").bind("click.jscroll",function(){return g.autoTriggerUntil>0&&i.autoTriggerUntil<=0&&(i.autoTriggerUntil=g.autoTriggerUntil),m(r),U(),!1})))},T=function(){H(),y()},k=function(){var t=e.find("div.jscroll-inner").first(),n=e.data("jscroll");return n.waiting=!0,t.prepend('<div class="jscroll-prepended" />').children(".jscroll-prepended").first().html('<div class="jscroll-loading">'+i.loadingHtml+"</div>"),e.animate({scrollTop:t.outerHeight()},0,function(){t.find("div.jscroll-prepended").first().load(n.prevHref,function(t,l){if("error"===l)return b();var o=r(this).find(i.prevSelector).first();n.waiting=!1,n.prevHref=o.attr("href")?r.trim(o.attr("href")+" "+i.contentSelector):!1,r(".jscroll-prev-parent",e).remove(),x(),i.callback&&i.callback.call(this);var c=r(this).find(i.nextSelector).first();m(c),r(this).find(".jscroll-next-parent").first().remove(),I("dir",n)})})},U=function(){var t=e.find("div.jscroll-inner").first(),n=e.data("jscroll");return n.waiting=!0,t.append('<div class="jscroll-added" />').children(".jscroll-added").last().html('<div class="jscroll-loading">'+i.loadingHtml+"</div>"),e.animate({scrollTop:t.outerHeight()},0,function(){t.find("div.jscroll-added").last().load(n.nextHref,function(t,l){if("error"===l)return b();i.autoTriggerUntil>0&&i.autoTriggerUntil--;var o=r(this).find(i.nextSelector).first();n.waiting=!1,n.nextHref=o.attr("href")?r.trim(o.attr("href")+" "+i.contentSelector):!1,r(".jscroll-next-parent",e).remove(),w(),i.callback&&i.callback.call(this);var c=r(this).find(i.prevSelector).first();h(c),r(this).find(".jscroll-prev-parent").first().remove(),I("dir",n)})})},I=function(r){if(i.debug&&"object"==typeof console&&("object"==typeof r||"function"==typeof console[r]))if("object"==typeof r){var e=[];for(var t in r)"function"==typeof console[t]?(e=r[t].length?r[t]:[r[t]],console[t].apply(console,e)):console.log.apply(console,e)}else console[r].apply(console,Array.prototype.slice.call(arguments,1))};return e.data("jscroll",r.extend({},n,{initialized:!0,waiting:!1,nextHref:p,prevHref:u})),v(),j(),T(),r.extend(e.jscroll,{destroy:b}),e};r.fn.jscroll=function(t){return this.each(function(){var n,l=r(this),i=l.data("jscroll");i&&i.initialized||(n=new e(l,t))})}}(jQuery);
//# sourceMappingURL=jquery.jscroll.min.js.map